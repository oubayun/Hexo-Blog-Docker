version: "3"
services:
  oubayun:
    image: oubayun/hexo-blog:latest
    environment:
      domainname: oubayun.com
    container_name: oubayun
    restart: always
    ports:
      - 80
    volumes:
      - /root/DockerConfig/oubayun/mdfiles:/blog/source/_posts
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.oubayun.rule=Host(`oubayun.com`) || Host(`www.oubayun.com`)"
      - "traefik.http.routers.oubayun.entryPoints=websecure"
      - "traefik.http.routers.oubayun.tls=true"
      - "traefik.http.routers.oubayun.tls.certresolver=myresolver"
      - "traefik.http.routers.oubayun.service=oubayun"
      - "traefik.http.services.oubayun.loadbalancer.server.port=80"
networks:
  default:
    external:
      name: traefik_net